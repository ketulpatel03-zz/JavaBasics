package com.javaBasics.xmlToJSONMigration;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import org.apache.commons.lang3.StringUtils;

public class PlanMigration {

	public static void main(String[] args) {

//		String text = "<UT=\"Embed(TextObject(@SQL_ID=@Inline,OBJECT_ID=MFI_B1292F59574B42D7AC0E07C40B69E77A,REF_ID=MFI_B1292F59574B42D7AC0E07C40B69E77A))\">\r\n"
//				+ "<IMG \"OB1_100085(@CONTROL=MFI_1E448926701F4FF3AFA6D8A5D842EC5E,REF_ID=MFI_1E448926701F4FF3AFA6D8A5D842EC5E).@UDV\">\r\n"
//				+ "\r\n"
//				+ "<IMG \"OB1_100084(@CONTROL=MFI_67FFC5597DA046E7910CC867A7646F6A,REF_ID=MFI_67FFC5597DA046E7910CC867A7646F6A,@SRC_CONTROL=,@SRC_REF_ID=).@UDV\">\r\n"
//				+ "\r\n"
//				+ "<IMG \"MF1_1000540(@CONTROL=MFI_4A069F9966AD4C5AAB8CEC5DC4D21702,REF_ID=MFI_4A069F9966AD4C5AAB8CEC5DC4D21702).@UDV\">\r\n"
//				+ "\r\n"
//				+ "<IMG \"MF1_1000529(@CONTROL=MFI_A77C67EEB0EC4FB288344CE13360D528,REF_ID=MFI_A77C67EEB0EC4FB288344CE13360D528).@UDV\">";

//		String text = "collect\r\n"
//				+ "<IMG \"MF1_1000540(@CONTROL=MFI_69414F9AEC63471A98055F3793A49192,REF_ID=MFI_69414F9AEC63471A98055F3793A49192).@UDV\">\r\n"
//				+ "collect";

		String text = "This is Plain Text. <IMG \"OB1_100085(@CONTROL=QAI_A385F86DF4A3420091BC269C674A26BA,REF_ID=QAI_A385F86DF4A3420091BC269C674A26BA).@UDV\">Demo.<IMG \"OB1_100084(@CONTROL=QAI_9EED6BCAECBE476980C7C3515054E2A6,REF_ID=QAI_9EED6BCAECBE476980C7C3515054E2A6).@UDV\"><IMG \"MF1_1000529(@CONTROL=QAI_FDE4D560FAAE425391DFD6C49C782F66,REF_ID=QAI_FDE4D560FAAE425391DFD6C49C782F66).@UDV\">This is ending text.  <UT=\"RtfEditControl(Text=7B5C727466315C616E73695C64656666305C7563315C616E7369637067313235325C6465667461623732307B5C666F6E7474626C7B5C66305C666E696C5C666368617273657431205461686F6D613B7D7B5C66315C666E696C5C6663686172736574312057696E6744696E67733B7D7D7B5C636F6C6F7274626C5C726564305C677265656E305C626C7565303B5C7265643235355C677265656E305C626C7565303B5C726564305C677265656E3132385C626C7565303B5C726564305C677265656E305C626C75653235353B5C7265643235355C677265656E3235355C626C7565303B5C7265643235355C677265656E305C626C75653235353B5C7265643132385C677265656E305C626C75653132383B5C7265643132385C677265656E305C626C7565303B5C726564305C677265656E3235355C626C7565303B5C726564305C677265656E3235355C626C75653235353B5C726564305C677265656E3132385C626C75653132383B5C726564305C677265656E305C626C75653132383B5C7265643235355C677265656E3235355C626C75653235353B5C7265643139325C677265656E3139325C626C75653139323B5C7265643132385C677265656E3132385C626C75653132383B5C726564305C677265656E305C626C7565303B7D5C7770707268656164666F6F74315C70617065727731323234305C70617065726831353834305C6D6172676C313838305C6D61726772313838305C6D61726774313434305C6D61726762313434305C686561646572793732305C666F6F746572793732305C656E646E686572655C7365637464656661756C74636C7B5C2A5C67656E657261746F72205750546F6F6C735F352E3335303B7D7B5C706C61696E5C66305C667332325C6362382054484953204953205249434820544558542E5C7061720D0A7D7D)\">";

		String[] textArray = text.replaceAll("<", "\n<").replaceAll(">", ">\n").split("\n");
		List<Map<String, Object>> list = new ArrayList<>();
		for (String txt : textArray) {
			Map<String, Object> map = new HashMap<String, Object>();
			if (txt.startsWith("<")) {
				if (txt.contains("<UT=\"Embed(TextObject(")) {
					map.put("control", "text");
					map.put("referenceId", txt.substring(txt.indexOf("OBJECT_ID=") + 10, txt.indexOf(",REF_ID")));
					list.add(map);
				} else if (txt.contains("<IMG \"OB1_100085(")) {
					map.put("control", "part");
					map.put("referenceId", txt.substring(txt.indexOf("@CONTROL=") + 9, txt.indexOf(",REF_ID")));
					list.add(map);
				} else if (txt.contains("<IMG \"OB1_100084")) {
					map.put("control", "tool");
					map.put("referenceId", txt.substring(txt.indexOf("@CONTROL=") + 9, txt.indexOf(",REF_ID")));
					list.add(map);
				} else if (txt.contains("<IMG \"MF1_1000540")) {
					map.put("control", "dc");
					map.put("referenceId", txt.substring(txt.indexOf("@CONTROL=") + 9, txt.indexOf(",REF_ID")));
					list.add(map);
				} else if (txt.contains("<IMG \"MF1_1000529(")) {
					map.put("control", "buyoff");
					map.put("referenceId", txt.substring(txt.indexOf("@CONTROL=") + 9, txt.indexOf(",REF_ID")));
					list.add(map);
				}
			} else if (StringUtils.isNotEmpty(txt)) {
				map.put("control", "text");
				map.put("referenceId", txt.trim());
				list.add(map);
			}
		}
		System.out.println(list);
	}
}
